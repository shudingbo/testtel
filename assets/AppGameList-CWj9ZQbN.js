import{d as C,i as G,j as $,a as g,r as v,k as L,K as U,b as t,f as e,c as f,u as m,t as w,F as h,g as y,p as O,J as T,o as n,L as x,T as M,h as N,s as R,_ as j}from"./index-tmk96ooy.js";import{u as B}from"./games-Bwb317uw.js";const H={class:"app-game-list"},J={class:"breadcrumb"},E={class:"breadcrumb-item current"},F={class:"games-container"},V={key:0,class:"loading-placeholder"},q={key:1,class:"no-games"},D={class:"no-games-content"},K={key:2,class:"games-grid"},z=["onClick"],P={class:"game-image"},Q=["src","alt"],W=C({__name:"AppGameList",setup(X){const b=T(),_=O(),i=B(),l=G(),k=$(),c=g(()=>b.params.appId),d=v([]),u=v(!0),I=g(()=>i.getAppInfo(c.value)),S=()=>{_.push("/")},A=s=>{if(l.isLoggedIn===!1){k.showAuthModal("login");return}if(R()){const o={gameId:s.cp_game_id,hash:l.userMoneyInfo.unionid,cp_game_info:s.props.start_info,lang:s.props.language,direction:s.props.direction},r=Object.keys(o).map(p=>`${encodeURIComponent(p)}=${encodeURIComponent(o[p])}`).join("&"),a=`${s.url}?${r}`;window.location.href=a;return}else _.push({name:"Game",params:{gameId:s.game_id}}),l.setCurrentGame(JSON.parse(JSON.stringify(s)))};return L(async()=>{u.value=!0;try{await i.fetchApps(),d.value=i.getAppGames(c.value),await U(),document.body.scrollTop=0}catch(s){console.error("Error loading App games:",s)}finally{u.value=!1}}),(s,o)=>{var r;return n(),t("div",H,[e("div",J,[e("div",{class:"breadcrumb-item",onClick:S},[f(m(x)),o[0]||(o[0]=e("span",null,"Home",-1))]),o[1]||(o[1]=e("div",{class:"breadcrumb-separator"},">",-1)),e("div",E,[e("span",null,w(((r=I.value)==null?void 0:r.name)||c.value),1)])]),e("div",F,[u.value?(n(),t("div",V,[(n(),t(h,null,y(9,a=>e("div",{key:a,class:"game-card-skeleton"})),64))])):d.value.length===0?(n(),t("div",q,[e("div",D,[f(m(M)),o[2]||(o[2]=e("p",null,"暂无游戏",-1))])])):(n(),t("div",K,[(n(!0),t(h,null,y(d.value,a=>(n(),t("div",{key:a.game_id,class:"game-card",onClick:p=>A(a)},[e("div",P,[e("img",{src:`${m(N)().resUrl}${a.logo}`,alt:a.name},null,8,Q)])],8,z))),128))]))])])}}}),ee=j(W,[["__scopeId","data-v-bd5b59ae"]]);export{ee as default};
