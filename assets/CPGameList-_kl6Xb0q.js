import{d as G,i as $,j as w,a as g,r as v,k as L,K as U,b as a,f as e,c as f,u as p,t as O,F as h,g as y,p as T,J as x,o as n,L as M,T as N,h as P,s as R,_ as j}from"./index-tmk96ooy.js";import{u as B}from"./games-Bwb317uw.js";const H={class:"cp-game-list"},J={class:"breadcrumb"},A={class:"breadcrumb-item current"},E={class:"games-container"},F={key:0,class:"loading-placeholder"},V={key:1,class:"no-games"},q={class:"no-games-content"},D={key:2,class:"games-grid"},K=["onClick"],z={class:"game-image"},Q=["src","alt"],W=G({__name:"CPGameList",setup(X){const k=x(),_=T(),i=B(),c=$(),b=w(),l=g(()=>k.params.cpId),d=v([]),u=v(!0),C=g(()=>i.getCpInfo(l.value)),I=()=>{_.push("/")},S=s=>{if(c.isLoggedIn===!1){b.showAuthModal("login");return}if(R()){const o={gameId:s.cp_game_id,hash:c.userMoneyInfo.unionid,cp_game_info:s.props.start_info,lang:s.props.language,direction:s.props.direction},r=Object.keys(o).map(m=>`${encodeURIComponent(m)}=${encodeURIComponent(o[m])}`).join("&"),t=`${s.url}?${r}`;window.location.href=t;return}else _.push({name:"Game",params:{gameId:s.game_id}}),c.setCurrentGame(JSON.parse(JSON.stringify(s)))};return L(async()=>{u.value=!0;try{await i.fetchProviders(),d.value=await i.getCpGames(l.value),await U(),document.body.scrollTop=0}catch(s){console.error("Error loading CP games:",s)}finally{u.value=!1}}),(s,o)=>{var r;return n(),a("div",H,[e("div",J,[e("div",{class:"breadcrumb-item",onClick:I},[f(p(M)),o[0]||(o[0]=e("span",null,"Home",-1))]),o[1]||(o[1]=e("div",{class:"breadcrumb-separator"},">",-1)),e("div",A,[e("span",null,O(((r=C.value)==null?void 0:r.name)||l.value),1)])]),e("div",E,[u.value?(n(),a("div",F,[(n(),a(h,null,y(9,t=>e("div",{key:t,class:"game-card-skeleton"})),64))])):d.value.length===0?(n(),a("div",V,[e("div",q,[f(p(N)),o[2]||(o[2]=e("p",null,"暂无游戏",-1))])])):(n(),a("div",D,[(n(!0),a(h,null,y(d.value,t=>(n(),a("div",{key:t.game_id,class:"game-card",onClick:m=>S(t)},[e("div",z,[e("img",{src:`${p(P)().resUrl}${t.logo}`,alt:t.name},null,8,Q)])],8,K))),128))]))])])}}}),ee=j(W,[["__scopeId","data-v-208fd298"]]);export{ee as default};
